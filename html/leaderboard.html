<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hacker League - Leaderboard</title>
        <link rel="stylesheet" href="/css/styles.css">
        <link rel="stylesheet" href="/css/navbar.css">
        <link rel="stylesheet" href="/css/leaderboard.css">
        <script type="module" src="js/app.js" defer></script>
    </head>
    <body>
        <nav class="navbar">
            <div class="navbar-brand">
                <img class="logo" src="/static/images/HS_NOVO.svg" alt="HS Dashboard">
            </div>
            <div class="navbar-links">
                <a href="/">Profile</a>
                <a href="/members">Members</a>
                <a href="/logout">Logout</a>
            </div>
            <div class="hamburger-menu">
                <div class="hamburger-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="hamburger-content">
                    <a href="/">Profile</a>
                    <a href="/leaderboard">Leaderboard</a>
                    <a href="/members">Members</a>
                    <a href="/logout">Logout</a>
                </div>
            </div>
        </nav>

        <div class="leaderboard-container">
            <header class="leaderboard-header">
                <h1>üèÜ Hacker League Leaderboard</h1>
                <p>Track your progress and compete with the best hackers!</p>
            </header>

            <div class="leaderboard-controls">
                <div class="control-group">
                    <label for="classificationType">Classification Type:</label>
                    <select id="classificationType" class="control-select">
                        <option value="team">Team Classification</option>
                        <option value="individual">Individual Classification</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="pointsType">Points Type:</label>
                    <select id="pointsType" class="control-select">
                        <option value="total">Total Points</option>
                        <option value="pj">PJ Points</option>
                        <option value="pcc">PCC Points</option>
                    </select>
                </div>
            </div>

            <div class="leaderboard-content">
                <div id="leaderboardTable" class="leaderboard-table">
                    <!-- Leaderboard will be populated here -->
                </div>
            </div>

            <div class="stats-summary">
                <div class="stat-card">
                    <h3>Total Participants</h3>
                    <span id="totalParticipants">0</span>
                </div>
                <div class="stat-card">
                    <h3>Active Teams</h3>
                    <span id="activeTeams">0</span>
                </div>
                <div class="stat-card">
                    <h3>Total Points</h3>
                    <span id="totalPoints">0</span>
                </div>
            </div>
        </div>

        <script>
            // Leaderboard data (simulated database)
            const leaderboardData = {
                teams: [
                    { name: "Cyber Warriors", totalPoints: 2850, pjPoints: 1200, pccPoints: 1650, members: 4 },
                    { name: "Code Breakers", totalPoints: 2720, pjPoints: 1100, pccPoints: 1620, members: 3 },
                    { name: "Digital Ninjas", totalPoints: 2580, pjPoints: 1050, pccPoints: 1530, members: 5 },
                    { name: "Hack Masters", totalPoints: 2450, pjPoints: 980, pccPoints: 1470, members: 4 },
                    { name: "Security Squad", totalPoints: 2320, pjPoints: 920, pccPoints: 1400, members: 3 },
                    { name: "Byte Force", totalPoints: 2180, pjPoints: 880, pccPoints: 1300, members: 4 },
                    { name: "Crypto Kings", totalPoints: 2050, pjPoints: 820, pccPoints: 1230, members: 3 },
                    { name: "Network Knights", totalPoints: 1920, pjPoints: 780, pccPoints: 1140, members: 4 }
                ],
                individuals: [
                    { name: "Alex Chen", team: "Cyber Warriors", totalPoints: 850, pjPoints: 350, pccPoints: 500 },
                    { name: "Maria Santos", team: "Code Breakers", totalPoints: 820, pjPoints: 330, pccPoints: 490 },
                    { name: "David Kim", team: "Digital Ninjas", totalPoints: 780, pjPoints: 310, pccPoints: 470 },
                    { name: "Sarah Johnson", team: "Hack Masters", totalPoints: 750, pjPoints: 300, pccPoints: 450 },
                    { name: "Carlos Rodriguez", team: "Security Squad", totalPoints: 720, pjPoints: 290, pccPoints: 430 },
                    { name: "Emma Wilson", team: "Byte Force", totalPoints: 690, pjPoints: 280, pccPoints: 410 },
                    { name: "James Lee", team: "Crypto Kings", totalPoints: 660, pjPoints: 270, pccPoints: 390 },
                    { name: "Ana Silva", team: "Network Knights", totalPoints: 630, pjPoints: 260, pccPoints: 370 },
                    { name: "Michael Brown", team: "Cyber Warriors", totalPoints: 600, pjPoints: 250, pccPoints: 350 },
                    { name: "Lisa Garcia", team: "Code Breakers", totalPoints: 570, pjPoints: 240, pccPoints: 330 }
                ]
            };

            // Initialize leaderboard
            document.addEventListener('DOMContentLoaded', function() {
                initializeLeaderboard();
                setupEventListeners();
                updateStats();
                setupHamburgerMenu();
            });

            function initializeLeaderboard() {
                renderLeaderboard('team', 'total');
            }

            function setupEventListeners() {
                document.getElementById('classificationType').addEventListener('change', function() {
                    const classificationType = this.value;
                    const pointsType = document.getElementById('pointsType').value;
                    renderLeaderboard(classificationType, pointsType);
                });

                document.getElementById('pointsType').addEventListener('change', function() {
                    const classificationType = document.getElementById('classificationType').value;
                    const pointsType = this.value;
                    renderLeaderboard(classificationType, pointsType);
                });
            }

            function renderLeaderboard(classificationType, pointsType) {
                const tableContainer = document.getElementById('leaderboardTable');
                const data = classificationType === 'team' ? leaderboardData.teams : leaderboardData.individuals;
                
                // Sort data based on points type
                const sortedData = [...data].sort((a, b) => {
                    const aPoints = pointsType === 'total' ? a.totalPoints : 
                                   pointsType === 'pj' ? a.pjPoints : a.pccPoints;
                    const bPoints = pointsType === 'total' ? b.totalPoints : 
                                   pointsType === 'pj' ? b.pjPoints : b.pccPoints;
                    return bPoints - aPoints;
                });

                let tableHTML = `
                    <table class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>${classificationType === 'team' ? 'Team' : 'Name'}</th>
                                ${classificationType === 'individual' ? '<th>Team</th>' : '<th>Members</th>'}
                                <th>${pointsType.charAt(0).toUpperCase() + pointsType.slice(1)} Points</th>
                                <th>PJ Points</th>
                                <th>PCC Points</th>
                            </tr>
                        </thead>
                        <tbody>
                `;

                sortedData.forEach((item, index) => {
                    const rank = index + 1;
                    const points = pointsType === 'total' ? item.totalPoints : 
                                 pointsType === 'pj' ? item.pjPoints : item.pccPoints;
                    
                    const rankClass = rank <= 3 ? `rank-${rank}` : '';
                    const medal = rank === 1 ? 'ü•á' : rank === 2 ? 'ü•à' : rank === 3 ? 'ü•â' : '';

                    tableHTML += `
                        <tr class="${rankClass}">
                            <td class="rank-cell">
                                <span class="rank-number">${rank}</span>
                                ${medal}
                            </td>
                            <td class="name-cell">${item.name}</td>
                            ${classificationType === 'individual' ? 
                                `<td class="team-cell">${item.team}</td>` : 
                                `<td class="members-cell">${item.members} members</td>`
                            }
                            <td class="points-cell">${item.totalPoints}</td>
                            <td class="pj-points">${item.pjPoints}</td>
                            <td class="pcc-points">${item.pccPoints}</td>
                        </tr>
                    `;
                });

                tableHTML += `
                        </tbody>
                    </table>
                `;

                tableContainer.innerHTML = tableHTML;
            }

            function updateStats() {
                const totalParticipants = leaderboardData.individuals.length;
                const activeTeams = leaderboardData.teams.length;
                const totalPoints = leaderboardData.teams.reduce((sum, team) => sum + team.totalPoints, 0);

                document.getElementById('totalParticipants').textContent = totalParticipants;
                document.getElementById('activeTeams').textContent = activeTeams;
                document.getElementById('totalPoints').textContent = totalPoints.toLocaleString();
            }

            function setupHamburgerMenu() {
                const hamburgerMenu = document.querySelector('.hamburger-menu');
                if (hamburgerMenu) {
                    hamburgerMenu.addEventListener('click', function() {
                        this.classList.toggle('active');
                    });

                    // Close menu when clicking outside
                    document.addEventListener('click', function(event) {
                        if (!hamburgerMenu.contains(event.target)) {
                            hamburgerMenu.classList.remove('active');
                        }
                    });
                }
            }
        </script>
    </body>
</html> 